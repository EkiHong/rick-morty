<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API è‡ªå‹•åŒ–æ¸¬è©¦æ¶æ§‹åœ–</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .architecture-container {
            width: 100%;
            overflow-x: auto;
            padding: 20px 0;
        }
        
        svg {
            display: block;
            margin: 0 auto;
        }
        
        .legend {
            margin-top: 30px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
        }
        
        .legend h3 {
            color: #2d3748;
            margin-bottom: 15px;
        }
        
        .legend-item {
            display: inline-block;
            margin: 10px 20px 10px 0;
        }
        
        .legend-color {
            display: inline-block;
            width: 30px;
            height: 20px;
            margin-right: 8px;
            vertical-align: middle;
            border-radius: 4px;
            border: 1px solid #cbd5e0;
        }
        
        .info-section {
            margin-top: 30px;
            padding: 20px;
            background: #edf2f7;
            border-radius: 10px;
        }
        
        .info-section h3 {
            color: #2d3748;
            margin-bottom: 15px;
        }
        
        .flow-description {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ API è‡ªå‹•åŒ–æ¸¬è©¦æ¶æ§‹åœ–</h1>
        
        <div class="architecture-container">
            <svg width="1300" height="900" viewBox="0 0 1300 900" xmlns="http://www.w3.org/2000/svg">
                <!-- å®šç¾©æ¼¸å±¤å’Œé™°å½± -->
                <defs>
                    <linearGradient id="gradientFramework" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#4299e1;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#2b6cb0;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="gradientUnit" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#48bb78;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#2f855a;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="gradientFlow" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#ed8936;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#c05621;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="gradientTestcase" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#9f7aea;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#6b46c1;stop-opacity:1" />
                    </linearGradient>
                    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur in="SourceAlpha" result="blur" stdDeviation="3"/>
                        <feOffset in="blur" dx="2" dy="2" result="offsetBlur"/>
                        <feMerge>
                            <feMergeNode in="offsetBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>
                
                <!-- èƒŒæ™¯å±¤ç´šæ¨™ç¤º -->
                <rect x="20" y="20" width="1260" height="180" fill="#e6f7ff" stroke="#91d5ff" stroke-width="2" rx="10" opacity="0.5"/>
                <text x="30" y="45" font-size="16" font-weight="bold" fill="#096dd9">åŸ·è¡Œå±¤</text>
                
                <rect x="20" y="220" width="1260" height="180" fill="#f0f5ff" stroke="#adc6ff" stroke-width="2" rx="10" opacity="0.5"/>
                <text x="30" y="245" font-size="16" font-weight="bold" fill="#2f54eb">æ¸¬è©¦æ¡ˆä¾‹å±¤</text>
                
                <rect x="20" y="420" width="1260" height="180" fill="#f9f0ff" stroke="#d3adf7" stroke-width="2" rx="10" opacity="0.5"/>
                <text x="30" y="445" font-size="16" font-weight="bold" fill="#531dab">æ¥­å‹™é‚è¼¯å±¤</text>
                
                <rect x="20" y="620" width="1260" height="260" fill="#f6ffed" stroke="#b7eb8f" stroke-width="2" rx="10" opacity="0.5"/>
                <text x="30" y="645" font-size="16" font-weight="bold" fill="#389e0d">æ¡†æ¶åŸºç¤å±¤</text>
                
                <!-- åŸ·è¡Œå±¤ -->
                <!-- run.py -->
                <rect x="100" y="60" width="150" height="80" fill="#1890ff" stroke="#0050b3" stroke-width="2" rx="10" filter="url(#shadow)"/>
                <text x="175" y="95" font-size="18" font-weight="bold" text-anchor="middle" fill="white">run.py</text>
                <text x="175" y="115" font-size="12" text-anchor="middle" fill="white">åŸ·è¡Œå…¥å£</text>
                
                <!-- conftest.py (æ ¹ç›®éŒ„) -->
                <rect x="300" y="60" width="150" height="80" fill="#1890ff" stroke="#0050b3" stroke-width="2" rx="10" filter="url(#shadow)"/>
                <text x="375" y="95" font-size="18" font-weight="bold" text-anchor="middle" fill="white">conftest.py</text>
                <text x="375" y="115" font-size="12" text-anchor="middle" fill="white">å…¨åŸŸé…ç½®</text>
                
                <!-- path.py -->
                <rect x="500" y="60" width="150" height="80" fill="#1890ff" stroke="#0050b3" stroke-width="2" rx="10" filter="url(#shadow)"/>
                <text x="575" y="95" font-size="18" font-weight="bold" text-anchor="middle" fill="white">path.py</text>
                <text x="575" y="115" font-size="12" text-anchor="middle" fill="white">è·¯å¾‘ç®¡ç†</text>
                
                <!-- env è³‡æ–™å¤¾ -->
                <rect x="700" y="60" width="200" height="80" fill="#52c41a" stroke="#237804" stroke-width="2" rx="10" filter="url(#shadow)"/>
                <text x="800" y="90" font-size="18" font-weight="bold" text-anchor="middle" fill="white">env/</text>
                <text x="800" y="110" font-size="12" text-anchor="middle" fill="white">__init__.py | all.py</text>
                <text x="800" y="125" font-size="10" text-anchor="middle" fill="white">ç’°å¢ƒé…ç½®ç®¡ç†</text>
                
                <!-- data è³‡æ–™å¤¾ -->
                <rect x="950" y="60" width="200" height="80" fill="#faad14" stroke="#ad6800" stroke-width="2" rx="10" filter="url(#shadow)"/>
                <text x="1050" y="90" font-size="18" font-weight="bold" text-anchor="middle" fill="white">data/</text>
                <text x="1050" y="110" font-size="12" text-anchor="middle" fill="white">UAT/ | STG/ | PROD/</text>
                <text x="1050" y="125" font-size="10" text-anchor="middle" fill="white">æ¸¬è©¦è³‡æ–™</text>
                
                <!-- æ¸¬è©¦æ¡ˆä¾‹å±¤ -->
                <!-- testcase ä¸»è³‡æ–™å¤¾ -->
                <rect x="100" y="260" width="250" height="100" fill="url(#gradientTestcase)" stroke="#553c9a" stroke-width="2" rx="10" filter="url(#shadow)"/>
                <text x="225" y="290" font-size="20" font-weight="bold" text-anchor="middle" fill="white">testcase/</text>
                <text x="225" y="315" font-size="14" text-anchor="middle" fill="white">æ¸¬è©¦æ¡ˆä¾‹å±¤</text>
                <text x="225" y="335" font-size="11" text-anchor="middle" fill="white">character/ | flow/</text>
                <text x="225" y="350" font-size="11" text-anchor="middle" fill="white">location/ | episode/</text>
                
                <!-- å–®ä¸€ API æ¸¬è©¦ -->
                <rect x="400" y="260" width="180" height="100" fill="#9f7aea" stroke="#6b46c1" stroke-width="2" rx="10" filter="url(#shadow)"/>
                <text x="490" y="290" font-size="16" font-weight="bold" text-anchor="middle" fill="white">å–®ä¸€ API æ¸¬è©¦</text>
                <text x="490" y="310" font-size="12" text-anchor="middle" fill="white">test_get_character.py</text>
                <text x="490" y="330" font-size="11" text-anchor="middle" fill="white">âœ“ æ­£å‘æ¸¬è©¦</text>
                <text x="490" y="345" font-size="11" text-anchor="middle" fill="white">âœ“ è² å‘æ¸¬è©¦</text>
                
                <!-- Flow æ¸¬è©¦ -->
                <rect x="630" y="260" width="180" height="100" fill="#9f7aea" stroke="#6b46c1" stroke-width="2" rx="10" filter="url(#shadow)"/>
                <text x="720" y="290" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Flow æ¸¬è©¦</text>
                <text x="720" y="310" font-size="12" text-anchor="middle" fill="white">test_character_</text>
                <text x="720" y="325" font-size="12" text-anchor="middle" fill="white">location_flow.py</text>
                <text x="720" y="345" font-size="11" text-anchor="middle" fill="white">âœ“ æ¥­å‹™æµç¨‹æ¸¬è©¦</text>
                
                <!-- conftest (æ¸¬è©¦é…ç½®) -->
                <rect x="860" y="260" width="150" height="100" fill="#b794f4" stroke="#6b46c1" stroke-width="2" rx="10" filter="url(#shadow)"/>
                <text x="935" y="290" font-size="16" font-weight="bold" text-anchor="middle" fill="white">conftest.py</text>
                <text x="935" y="310" font-size="12" text-anchor="middle" fill="white">Fixture å®šç¾©</text>
                <text x="935" y="330" font-size="11" text-anchor="middle" fill="white">å‰ç½®è™•ç†</text>
                <text x="935" y="345" font-size="11" text-anchor="middle" fill="white">è³‡æ–™è¼‰å…¥</text>
                
                <!-- utils -->
                <rect x="1060" y="260" width="150" height="100" fill="#f687b3" stroke="#97266d" stroke-width="2" rx="10" filter="url(#shadow)"/>
                <text x="1135" y="290" font-size="18" font-weight="bold" text-anchor="middle" fill="white">utils/</text>
                <text x="1135" y="310" font-size="12" text-anchor="middle" fill="white">common.py</text>
                <text x="1135" y="330" font-size="11" text-anchor="middle" fill="white">å·¥å…·å‡½æ•¸</text>
                <text x="1135" y="345" font-size="11" text-anchor="middle" fill="white">è¼”åŠ©æ–¹æ³•</text>
                
                <!-- æ¥­å‹™é‚è¼¯å±¤ -->
                <!-- flow è³‡æ–™å¤¾ -->
                <rect x="300" y="460" width="300" height="100" fill="url(#gradientFlow)" stroke="#c05621" stroke-width="2" rx="10" filter="url(#shadow)"/>
                <text x="450" y="490" font-size="20" font-weight="bold" text-anchor="middle" fill="white">flow/</text>
                <text x="450" y="515" font-size="14" text-anchor="middle" fill="white">æ¥­å‹™æµç¨‹ç·¨æ’å±¤</text>
                <text x="450" y="535" font-size="12" text-anchor="middle" fill="white">character_location_flow.py</text>
                <text x="450" y="550" font-size="11" text-anchor="middle" fill="white">å¤š API ä¸²æ¥ | æ¥­å‹™é‚è¼¯å¯¦ç¾</text>
                
                <!-- unit è³‡æ–™å¤¾ -->
                <rect x="700" y="460" width="300" height="100" fill="url(#gradientUnit)" stroke="#2f855a" stroke-width="2" rx="10" filter="url(#shadow)"/>
                <text x="850" y="490" font-size="20" font-weight="bold" text-anchor="middle" fill="white">unit/</text>
                <text x="850" y="515" font-size="14" text-anchor="middle" fill="white">API å°è£å±¤</text>
                <text x="850" y="535" font-size="12" text-anchor="middle" fill="white">character/ | location/ | episode/</text>
                <text x="850" y="550" font-size="11" text-anchor="middle" fill="white">API æ–¹æ³•å°è£ | Payload è™•ç†</text>
                
                <!-- æ¡†æ¶åŸºç¤å±¤ -->
                <!-- framework è³‡æ–™å¤¾ -->
                <rect x="300" y="660" width="700" height="180" fill="url(#gradientFramework)" stroke="#2b6cb0" stroke-width="3" rx="10" filter="url(#shadow)"/>
                <text x="650" y="695" font-size="24" font-weight="bold" text-anchor="middle" fill="white">framework/</text>
                <text x="650" y="720" font-size="16" text-anchor="middle" fill="white">æ¸¬è©¦æ¡†æ¶åŸºç¤å±¤</text>
                
                <!-- æ¡†æ¶å…§éƒ¨çµ„ä»¶ -->
                <rect x="330" y="750" width="150" height="70" fill="#5b9bd5" stroke="#1f4788" stroke-width="2" rx="8"/>
                <text x="405" y="775" font-size="14" font-weight="bold" text-anchor="middle" fill="white">abstract_api.py</text>
                <text x="405" y="795" font-size="11" text-anchor="middle" fill="white">API æŠ½è±¡é¡</text>
                <text x="405" y="810" font-size="10" text-anchor="middle" fill="white">ä»‹é¢å®šç¾©</text>
                
                <rect x="510" y="750" width="150" height="70" fill="#5b9bd5" stroke="#1f4788" stroke-width="2" rx="8"/>
                <text x="585" y="775" font-size="14" font-weight="bold" text-anchor="middle" fill="white">request_api.py</text>
                <text x="585" y="795" font-size="11" text-anchor="middle" fill="white">Requests å¯¦ä½œ</text>
                <text x="585" y="810" font-size="10" text-anchor="middle" fill="white">HTTP è«‹æ±‚è™•ç†</text>
                
                <rect x="690" y="750" width="150" height="70" fill="#5b9bd5" stroke="#1f4788" stroke-width="2" rx="8"/>
                <text x="765" y="775" font-size="14" font-weight="bold" text-anchor="middle" fill="white">playwright_api.py</text>
                <text x="765" y="795" font-size="11" text-anchor="middle" fill="white">Playwright å¯¦ä½œ</text>
                <text x="765" y="810" font-size="10" text-anchor="middle" fill="white">ç€è¦½å™¨è‡ªå‹•åŒ–</text>
                
                <rect x="870" y="750" width="100" height="70" fill="#5b9bd5" stroke="#1f4788" stroke-width="2" rx="8"/>
                <text x="920" y="775" font-size="14" font-weight="bold" text-anchor="middle" fill="white">__init__.py</text>
                <text x="920" y="795" font-size="11" text-anchor="middle" fill="white">æ¨¡çµ„åˆå§‹åŒ–</text>
                
                <!-- é€£æ¥ç·šå’Œç®­é ­ -->
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#333" />
                    </marker>
                </defs>
                
                <!-- åŸ·è¡Œæµç¨‹ç®­é ­ -->
                <path d="M 175 140 L 175 180 L 225 180 L 225 260" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
                <text x="185" y="205" font-size="12" fill="#666">åŸ·è¡Œ</text>
                
                <!-- æ¸¬è©¦å±¤åˆ°æ¥­å‹™å±¤ -->
                <path d="M 225 360 L 225 400 L 450 400 L 450 460" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                <text x="320" y="395" font-size="12" fill="#666">èª¿ç”¨ Flow</text>
                
                <path d="M 490 360 L 490 400 L 850 400 L 850 460" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                <text x="650" y="395" font-size="12" fill="#666">èª¿ç”¨ API</text>
                
                <!-- æ¥­å‹™å±¤åˆ°æ¡†æ¶å±¤ -->
                <path d="M 450 560 L 450 600 L 650 600 L 650 660" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                <text x="520" y="595" font-size="12" fill="#666">ä½¿ç”¨æ¡†æ¶</text>
                
                <path d="M 850 560 L 850 600 L 650 600 L 650 660" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                <text x="730" y="595" font-size="12" fill="#666">ç¹¼æ‰¿å¯¦ä½œ</text>
                
                <!-- Flow åˆ° Unit çš„æ©«å‘é€£æ¥ -->
                <path d="M 600 510 L 700 510" stroke="#ff6b6b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                <text x="630" y="505" font-size="11" fill="#ff6b6b">ä¸²æ¥</text>
                
                <!-- è³‡æ–™æµå‘ -->
                <path d="M 1050 140 L 1050 180 L 935 180 L 935 260" stroke="#faad14" stroke-width="2" fill="none" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>
                <text x="970" y="205" font-size="12" fill="#faad14">æ¸¬è©¦è³‡æ–™</text>
                
                <path d="M 800 140 L 800 180 L 375 180 L 375 140" stroke="#52c41a" stroke-width="2" fill="none" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>
                <text x="580" y="175" font-size="12" fill="#52c41a">ç’°å¢ƒé…ç½®</text>
            </svg>
        </div>
        
        <div class="legend">
            <h3>ğŸ“‹ åœ–ä¾‹èªªæ˜</h3>
            <div class="legend-item">
                <span class="legend-color" style="background: #1890ff;"></span>
                <span>åŸ·è¡Œæ§åˆ¶å…ƒä»¶</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #52c41a;"></span>
                <span>ç’°å¢ƒé…ç½®</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #faad14;"></span>
                <span>æ¸¬è©¦è³‡æ–™</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: linear-gradient(135deg, #9f7aea, #6b46c1);"></span>
                <span>æ¸¬è©¦æ¡ˆä¾‹å±¤</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: linear-gradient(135deg, #ed8936, #c05621);"></span>
                <span>æ¥­å‹™æµç¨‹å±¤</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: linear-gradient(135deg, #48bb78, #2f855a);"></span>
                <span>APIå°è£å±¤</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: linear-gradient(135deg, #4299e1, #2b6cb0);"></span>
                <span>æ¡†æ¶åŸºç¤å±¤</span>
            </div>
        </div>
        
        <div class="info-section">
            <h3>ğŸ”„ åŸ·è¡Œæµç¨‹èªªæ˜</h3>
            <div class="flow-description">
                <strong>1. å•Ÿå‹•éšæ®µï¼š</strong>run.py â†’ è®€å–ç’°å¢ƒé…ç½® (env/) â†’ åˆå§‹åŒ–è·¯å¾‘ (path.py) â†’ è¼‰å…¥å…¨åŸŸé…ç½® (conftest.py)
            </div>
            <div class="flow-description">
                <strong>2. æ¸¬è©¦åŸ·è¡Œï¼š</strong>Pytest åŸ·è¡Œæ¸¬è©¦æ¡ˆä¾‹ â†’ è¼‰å…¥æ¸¬è©¦è³‡æ–™ (data/) â†’ èª¿ç”¨ fixture (conftest.py)
            </div>
            <div class="flow-description">
                <strong>3. API èª¿ç”¨ï¼š</strong>æ¸¬è©¦æ¡ˆä¾‹ â†’ Flow å±¤ï¼ˆæ¥­å‹™é‚è¼¯ï¼‰ â†’ Unit å±¤ï¼ˆAPI å°è£ï¼‰ â†’ Framework å±¤ï¼ˆHTTP è«‹æ±‚ï¼‰
            </div>
            <div class="flow-description">
                <strong>4. å ±å‘Šç”Ÿæˆï¼š</strong>æ”¶é›†æ¸¬è©¦çµæœ â†’ ç”Ÿæˆ Allure å ±å‘Š â†’ è¼¸å‡ºåˆ° reports/
            </div>
        </div>
        
        <div class="info-section">
            <h3>ğŸ—ï¸ æ¶æ§‹å±¤ç´šè·è²¬</h3>
            <div class="flow-description">
                <strong>æ¡†æ¶åŸºç¤å±¤ (Framework)ï¼š</strong>
                <ul>
                    <li>æä¾› API è«‹æ±‚çš„åº•å±¤å¯¦ä½œï¼ˆabstract_api.pyï¼‰</li>
                    <li>æ”¯æ´å¤šç¨® HTTP å·¥å…·ï¼ˆrequestsã€playwrightï¼‰</li>
                    <li>è™•ç† HTTP è«‹æ±‚/å›æ‡‰çš„åŸºç¤åŠŸèƒ½</li>
                </ul>
            </div>
            <div class="flow-description">
                <strong>API å°è£å±¤ (Unit)ï¼š</strong>
                <ul>
                    <li>æŒ‰æœå‹™åŠƒåˆ† APIï¼ˆcharacterã€locationã€episodeï¼‰</li>
                    <li>å°è£å„ API çš„è«‹æ±‚æ–¹æ³•å’Œåƒæ•¸</li>
                    <li>è™•ç† Payload æ ¼å¼å’Œæ¥­å‹™é‚è¼¯</li>
                </ul>
            </div>
            <div class="flow-description">
                <strong>æ¥­å‹™æµç¨‹å±¤ (Flow)ï¼š</strong>
                <ul>
                    <li>ä¸²æ¥å¤šå€‹ API å½¢æˆæ¥­å‹™æµç¨‹</li>
                    <li>å¯¦ç¾è¤‡é›œçš„æ¸¬è©¦å ´æ™¯</li>
                    <li>è™•ç† API ä¹‹é–“çš„è³‡æ–™å‚³é</li>
                </ul>
            </div>
            <div class="flow-description">
                <strong>æ¸¬è©¦æ¡ˆä¾‹å±¤ (Testcase)ï¼š</strong>
                <ul>
                    <li>å¯¦ä½œå…·é«”çš„æ¸¬è©¦æ¡ˆä¾‹</li>
                    <li>é©—è­‰ API åŠŸèƒ½å’Œæ¥­å‹™æµç¨‹</li>
                    <li>ä½¿ç”¨ Pytest å’Œ Allure æ¨™è¨˜</li>
                </ul>
            </div>
            <div class="flow-description">
                <strong>åŸ·è¡Œæ§åˆ¶å±¤ï¼š</strong>
                <ul>
                    <li>run.py - çµ±ä¸€åŸ·è¡Œå…¥å£</li>
                    <li>env/ - å¤šç’°å¢ƒé…ç½®ç®¡ç†</li>
                    <li>data/ - æ¸¬è©¦è³‡æ–™ç®¡ç†</li>
                    <li>conftest.py - Pytest é…ç½®å’Œ Fixture</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>